#!/bin/sh
RESOLV_CONF="/etc/resolv.conf"

case "$1" in
    deconfig)
        ifconfig $interface 0.0.0.0 2>/dev/null
        route del default dev $interface 2>/dev/null
        ;;
    renew|bound)
        ifconfig $interface 0.0.0.0 2>/dev/null
        if [ -n "$mask" ]; then
            ifconfig $interface $ip netmask $mask ${broadcast:+broadcast $broadcast}
        else
            ifconfig $interface $ip
        fi
        if [ -n "$router" ]; then
            route del default dev $interface 2>/dev/null
            route add default gw $router dev $interface
        fi
        echo -n > $RESOLV_CONF
        for ns in $dns; do
            echo "nameserver $ns" >> $RESOLV_CONF
        done
        ;;
    *)
        echo "unknown udhcpc action: $1" >&2
        ;;
esac
